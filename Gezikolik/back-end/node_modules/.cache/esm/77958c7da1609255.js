let multer,path,updateProfile;_a16‍.x([["uploadPicture",()=>uploadPicture]]);_a16‍.w("multer",[["default",["multer"],function(v){multer=v}]]);_a16‍.w("path",[["default",["path"],function(v){path=v}]]);_a16‍.w("../controllers/userControllers",[["updateProfile",["updateProfile"],function(v){updateProfile=v}]]);



const storage = _a16‍.a("multer",multer).diskStorage({
  destination: (req, file, cb) => {
    cb(null, _a16‍.a("path",path).join(__dirname, "../uploads"));
  },
  filename: (req, file, cb) => {
    cb(null, `${Date.now()}-${file.originalname}`);
  },
});

const uploadPicture = _a16‍.a("multer",multer)({
  storage: storage,
  limits: {
    fileSize: 1 * 1000000, // 1mb
  },
  fileFilter: function (req, file, cb) {
    let ext = _a16‍.a("path",path).extname(file.originalname);
    if (ext !== ".png" && ext !== ".jpg" && ext !== ".jpeg") {
      return cb(new Error("Sadece resimlere izin verildi."));
    }
    cb(null,true);
  },
});

;_a16‍.j(["uploadPicture"]);
